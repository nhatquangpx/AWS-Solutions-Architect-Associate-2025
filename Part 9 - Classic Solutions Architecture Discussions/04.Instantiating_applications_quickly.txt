        ### Mục tiêu bài học ###
- Hiểu được tại sao việc khởi tạo và triển khai ứng dụng nhanh là quan trọng trên AWS 
- Nắm được khái niệm và lợi ích của Golden AMI (Amazon Machine Image)
- Biết cách sử dụng EC2 User Data để boostrapping (tự động cấu hình máy ảo khi khởi động)
- Biết cách tăng tốc khởi tạo CSDL RDS và EBS volumes bằng snapshots
- Hiểu mối quan hệ giữa Golden AMI + User Data trong thực tế (đặc biệt là khi dùng Elastic Beanstalk)

1. Vấn đề: Tại sao cần triển khai ứng dụng nhanh?
- Khi triển khai một hệ thống full-stack (frontend, backend, database,...) thì thông thường quá trình cài đặt, cấu hình và chạy ứng dụng trên các EC2 instances sẽ tốn rất nhiều thời gian:
    + Cài đặt OS 
    + Cài đặt dependencies (thư viện, môi trường, runtime)
    + Khôi phục dữ liệu 
    + Cấu hình mạng, port, ứng dụng 
- Việc này làm mất thời gian và không hiệu quả nếu mỗi lần triển khai lại phải làm lại từ đầu 
=> Ta cần một phương pháp để rút ngắn thời gian khởi tạo ứng dụng - tận dụng sức mạnh của Cloud

2. Giải pháp: Dùng Golden AMI 
- Golden AMI là một bản mẫu EC2 hoàn chỉnh, trong đó:
    + Đã cài sẵn hệ điều hành 
    + Đã cài sẵn ứng dụng, dependencies, cấu hình cần thiết 
    + Có thể chứa cả code và dữ liệu cơ bản 
- Cách hoạt động:
    1. Tạo một EC2 instance 
    2. Cài đặt đầy đủ mọi thứ (ứng dụng, môi trường, OS, thư viện,...)
    3. Khi sẵn sàng, tạo một AMI từ instance đó 
    4. Lần sau, thay vì cài đặt lại, chỉ cần launch EC2 mới từ Golden AMI 
-> Tất cả đều sẵn sàng chạy ngay khi khởi động 
- Lợi ích:
    + Khởi động cực nhanh 
    + Không cần cài đặt lại ứng dụng 
    + Giảm lỗi cấu hình do thao tác thủ công 
    + Dễ mở rộng khi cần nhiều instance giống nhau (vd auto-scaling)

3. EC2 User Data & Bootstrapping 
- "Bootstrapping" nghĩa là cấu hình tự động khi instance EC2 khởi động lần đầu 
- Ví dụ:
    + Tải code mới nhất từ GitHub
    + Cập nhật file cấu hình (database URL, password)
    + Cài đặt các gói nhỏ chưa có sẵn
- Cách thực hiện:
    + AWS cung cấp một tính năng gọi là User Data - nơi có thể ghi script (thường là shell script hoặc cloud-init script)
    + Khi EC2 khởi động, nó tự động chạy nội dung User Data một lần 
- Golden AMI vs User Data:
| Tiêu chí         | Golden AMI                 | User Data                          |
| ---------------- | -------------------------- | ---------------------------------- |
| Mục đích         | Cài đặt sẵn, cố định       | Cấu hình động khi chạy             |
| Tốc độ           | Rất nhanh (mọi thứ đã sẵn) | Chậm hơn (phải cài thêm)           |
| Dữ liệu thay đổi | Không linh hoạt            | Linh hoạt (ví dụ cập nhật DB URL)  |
| Khi nào dùng     | Khi ứng dụng ít thay đổi   | Khi cần cấu hình runtime linh hoạt |
=> Giải pháp tối ưu: Kết hợp cả Golden AMI + User Data 
- Ví dụ:
    + Golden AMI chứa ứng dụng và môi trường cơ bản 
    + User Data chỉ dùng để tải các giá trị động như biến môi trường, địa chỉ cơ sở dữ liệu, mật khẩu,...

4. Elastic Beanstalk và mô hình hybrid 
- Elastic Beanstalk là một dịch vụ AWS giúp triển khai ứng dụng nhanh 
- Nó áp dụng mô hình kết hợp giữa Golden AMI và User Data:
    + AWS chuẩn bị sẵn một base AMI (gọi là platform)
    + Khi triển khai ứng dụng, Elastic Beanstalk sẽ bootstrapping bằng User Data để cài thêm code, thông số, môi trường,...
-> Đây là ứng dụng thực tế hoàn hảo của mô hình hybrid 

5. RDS Databases - Dùng Snapshots để khôi phục nhanh 
- Với Amazon RDS, nếu phải khởi tạo database từ đầu, tạo schema và import dữ liệu lớn => rất chậm 
- Cách tối ưu là:
    + Tạo snapshot của RDS khi database đã sẵn sàng (đã có schema + data)
    + Khi cần, chỉ cần restore từ snapshot => Database mới sẽ có sẵn toàn bộ cấu trúc và dữ liệu 
- Lợi ích:
    + Triển khai nhanh 
    + Giảm thời gian downtime
    + Phục hồi dữ liệu đáng tin cậy 

6. EBS Volumes - Dùng Snapshots để khởi tạo ổ đĩa 
- Tương tự với EBS:
    + Nếu tạo một EBS volume trống, ta phải format và copy dữ liệu -> mất thời gian 
    + Nhưng nếu ta restore EBS volume từ snapshot, thì ổ đĩa đã được:
        . Format sẵn 
        . Có sẵn dữ liệu cần thiết 
-> Việc mount và khởi động instance sẽ nhanh hơn đáng kể 

7. Tổng kết cho kỳ thi AWS Solution Architect
| Thành phần   | Phương pháp tăng tốc   |
| ------------ | ---------------------- |
| EC2 Instance | Golden AMI + User Data |
| RDS Database | Restore from Snapshot  |
| EBS Volume   | Restore from Snapshot  |
=> Giảm thời gian cài đặt - Tăng tốc khởi động - Giảm lỗi thủ công 